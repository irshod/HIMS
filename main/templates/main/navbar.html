{% load static %}
{% load role_tags %}
<!-- Top Navigation -->
<nav class="navbar navbar-expand-lg bg-primary fixed-top">
  <div class="container-fluid">
    <div class="d-flex align-items-center">
      {% if request.user|has_role:'Admin' %}
        <a href="{% url 'admin_dashboard' %}" class="text-white"><h1 class="fst-italic me-3 text-white">HIMS</h1></a>
      {% endif %}

      {% if request.user|has_role:'Doctor' %}
        <a href="{% url 'doctor_dashboard' %}" class="text-white"><h1 class="fst-italic me-3 text-white">HIMS</h1></a>
      {% endif %}
      {% if request.user|has_role:'Nurse' %}
        <a href="{% url 'nurse_dashboard' %}" class="text-white"><h1 class="fst-italic me-3 text-white">HIMS</h1></a>
      {% endif %}
      {% if request.user|has_role:'Receptionist' %}
        <a href="{% url 'receptionist_dashboard' %}" class="text-white"><h1 class="fst-italic me-3 text-white">HIMS</h1></a>
      {% endif %}
    </div>

    <!-- Search Bar -->
    <div class="mx-auto" style="width: 30%;">
      <form class="d-flex" method="GET" action="{% url 'search_results' %}">
        <input class="form-control me-2 rounded-pill" type="search" placeholder="Search" name="query" aria-label="Search" />
        <button class="btn btn-light rounded-pill" type="submit">Go</button>
      </form>
    </div>

    <!-- Right Side of the Navbar -->
    <div class="d-flex align-items-center justify-content-end">
      <!-- Notifications Dropdown -->
      <!-- Inside base.html -->
      <li class="nav-item dropdown list-unstyled mx-3">
        <a class="nav-link dropdown-toggle text-white position-relative" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fas fa-bell"></i>
            <span class="badge bg-danger rounded-circle position-absolute top-0 start-100 translate-middle" id="notification-count" style="display: none;">3</span>
        </a>
        <ul class="dropdown-menu dropdown-menu-end shadow-lg" aria-labelledby="navbarDropdown">
            <li>
                <h5 class="dropdown-header">Notifications</h5>
            </li>
            <li id="notification-items">
                <a class="dropdown-item text-muted">Loading notifications...</a>
            </li>
        </ul>
      </li>


      <!-- User Profile Dropdown -->
      <li class="nav-item dropdown list-unstyled">
        <a class="nav-link dropdown-toggle text-white" href="#" id="profileDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-user"></i></a>
        <ul class="dropdown-menu dropdown-menu-end shadow-lg" aria-labelledby="profileDropdown">
          <li>
            <h5 class="dropdown-header">{{ user.get_full_name }}</h5>
          </li>
          <li>
            <a class="dropdown-item" href="{% url 'user_profile_view' %}"><i class="fas fa-user-circle"></i> View Profile</a>
          </li>
          <li>
            <a class="dropdown-item" href="{% url 'help' %}"><i class="fas fa-question-circle"></i> Help</a>
          </li>
          <li>
            <a class="dropdown-item" href="{% url 'logout' %}"><i class="fas fa-sign-out-alt"></i> Logout</a>
          </li>
        </ul>
      </li>
    </div>
  </div>
</nav>
